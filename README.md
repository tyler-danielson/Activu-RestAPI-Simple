# Acitvu AIS Connect

Use this plugin to connect to and control Activu Vis|Abiilty System via Activu RestAPI.

## Prerequisites

Before you can configure the plugin, ensure that Vis|Ability is configured and reachable on your network. Activu recommends that you configure a static IP address for the device, as DHCP addresses can change.

Refer to the Activu Swagger Webpage (https://<IPAddres>:59081/swagger/index.html) for help with setting up and connecting to AIS.

## Connecting to the Device
To begin using the plugin, drag it into the schematic and configure its Properties. Then, press F5 to save your design to the Core and run it.

In the plugin's Setup tab:

Type the IP Address, including port of the System Manager.

Specify your RestAPI credentials for the device, and then press Enter.
  
The plugin will automatically attempt a connection. If you see "OK" status, you are successfully connected to the device. If you see a "Fault" error, check to make sure you entered the correct parameters.

## Properties
#### Number of Layouts
Set the amount of layouts available to trigger from 2-10.  Default is 5.

#### Number of Scripts
Set the amount of scripts available to trigger from 2-10.  Default is 5.

#### Number of Sources
Set the amount of sources available to add or remove, from 2-10.  Default is 5.

#### Show Debug
Select 'Yes' to show the Debug Output window. For details, see the Debug Output topic in the Q-SYS Help.

## Controls
### Setup
#### IP Address
The IP address of the Activu System Manager and Port for RestAPI

#### API Key
This is the API key generator within Activu System Admin client.

#### Status
Displays the current connection status.

### Wall Config
#### Discovered Walls
This is a list of available display areas within the Vis|ability system, based on the API Key restrictions.  Upon changing, a GetWallData command is posted to Vis|ability to retrieve the configuration, available layouts, and current sources on the given wall.  The relevant information is populated for the wall.

#### Refresh Walls
This is used to post a GetWalls command to Vis|ability and retrieve the latest wall definitions

#### Wall ID
This is the ID given to the selected display area, based on the RestAPI

#### Wall Name
This is the clean name of the selected display area, as viewed within the Vis|ability Desktop Client.

#### XYWH
These are the dimensions of the selected display area, in pixels

#### Select Default Viewscreen
This is the default viewscreen that is used when sources are placed

#### Clear
This clears all of the sources from the selected viewscreen

#### Available Layouts
This is a list of the available layouts on the selected display area

#### Load Selected Layout
This triggers the LoadLayout call based on the layout selected above, in Available Layouts

#### Available Templates
This is a list of available templates on the selected display area

#### Current Content
This is a list of sources that are currently populated on to the selected display area

### Layouts
#### Layout ID
This is the ID of the layout selected with the preview select button.  It is generated by the Vis|ability RestAPI

#### Layout Name
This is the friendly name of the layout selected with the preview select button.  This is the name used in the Vis|ability Desktop Client

#### Preview
This is an SVG generated preview of the layout selected with the preview select button.  It is used for a quick reference of the layout.

#### Get Latest Layouts
This triggers a Get Layouts command based on the selected display area in the Wall Config tab.  The button will change green temporarily upon confirmation of returned data.

#### Preview Select
This button allows the user to change the preview frame based on selected sources.  Press the button below the magnifying glass icon to change previews.

#### Layout Definition
This is a dropdown of available layouts on the selected display area.  Selecting a new layout will save the ID needed to recall it.  A Legend will also be auto-generated based on the name of the layout, which can be changed by updating the "Legend" section.

#### UCI Edit
This is a toggle button that allows the user to determine if the UCI defines the trigger button for the layout, or the plugin definition does.  Enabling this will disable the legend defnition within the plugin and will prevent the plugin from auto-updating the trigger button for the command.

#### Legend
This is the text that will appear on the Trigger button for the command.  If UCI Edit is enabled, this input is disabled and ignored.

#### Trigger
This is the button that triggers the Load Layout command using the ID that is pulled when the Layout Definition is selected.  This is the button that should be added to a UCI.

### Scripts
#### Script ID
This is the ID of the script selected with the preview select button.  It is generated by the Vis|ability RestAPI

#### Script Name
This is the friendly name of the script selected with the preview select button.  This is the name used in the Vis|ability Desktop Client

#### Get Latest Scripts
This triggers a Get Scripts command based on the selected display area in the Wall Config tab.  The button will change green temporarily upon confirmation of returned data.

#### Preview Select
This button allows the user to change the preview frame based on selected script.  Press the button below the magnifying glass icon to change previews.

#### Script Definition
This is a dropdown of available scripts, including universal layout scripts.  Selecting a new scripts will save the ID needed to recall it.  A Legend will also be auto-generated based on the name of the script, which can be changed by updating the "Legend" section.

#### UCI Edit
This is a toggle button that allows the user to determine if the UCI defines the trigger button for the script, or the plugin definition does.  Enabling this will disable the legend defnition within the plugin and will prevent the plugin from auto-updating the trigger button for the command.

#### Legend
This is the text that will appear on the Trigger button for the command.  If UCI Edit is enabled, this input is disabled and ignored.

#### Trigger
This is the button that triggers the Run Script command using the ID that is pulled when the Script Definition is selected.  This is the button that should be added to a UCI.

### Sources
#### Source ID
This is the ID of the source selected with the preview select button.  It is generated by the Vis|ability RestAPI

#### Source Name
This is the friendly name of the source selected with the preview select button.  This is the name used in the Vis|ability Desktop Client

#### Get Latest Sources
This triggers a Get Sources command.  The button will change green temporarily upon confirmation of returned data.

#### Preview Select
This button allows the user to change the preview frame based on selected source.  Press the button below the magnifying glass icon to change previews.

#### Source Definition
This is a dropdown of available source.  Selecting a new source will save the ID needed to recall it.

#### XYWH
These are the x, y, width, and height coordinates used to place the source on the wall when the "Add" button is trigged.  These are in pixels.

#### Add
This is the button that triggers the Add Source command.  It uses a randomly generated label to allow for the removal of the source.  It uses the xywh coordinates and selected ID to add the sources to the selected display area as defined in the Wall Config tab.

#### Remove
This is the button that triggers the Remove Source command.  It uses the same randomly generated label from the Add command to remove the selected source from the display area.

## Support
If you have any questions or concerns with this template, please contact tyler.danielson@activu.com